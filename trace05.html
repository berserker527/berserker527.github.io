<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>歌尾倾泪_第五章</title>
		<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
		<style type="text/css">
			*{
				margin:0;
				padding:0;
				-moz-user-select: none;
				-webkit-user-select: none;
			}	
			h1{
				font-family:"MicroSoft YaHei";
				color:#f9bc16;
				text-align:center;
				margin:20px auto;
			}
			.context{
				width:960px;
				margin:0px auto;
				color:#039bf2;
			}
			.pager{
				width:960px;
				margin:20px auto;
			}
			.pageNum{
				float:left;
				width:24px;
				height:24px;
				line-height:24px;
				text-align:center;
				font-size:14px;
				border:1px solid #e0e0e0;
				margin:0px 3px;
			}
			.pageNum:hover{
				background:#e0e0e0;
				color:#f9bc16;
			}
			.current{
				float:left;
				width:24px;
				height:24px;
				line-height:24px;
				text-align:center;
				font-size:14px;
				border:1px solid #fff;
				color:#f9bc16;
				margin:0px 3px;
			}
			p{
				text-indent:28px;
				margin:3px auto;
				line-height:28px;
			}
			a{
				text-decoration:none;
				color:#039bf2;
			}
			a:hover{
				color:#f9bc16;
			}
		</style>
	</head>
	<body>
		<h1>Track 5 混乱的狂想曲</h1>
		<div class="context">
			正在加载，请稍等......
		</div>
		<div class="pager"></div>
	</body>
	<script type="text/javascript">
		var perLength = 1500;
		
		$(function (){
			
//			function showContext(currentPage){
//				$.ajax({
//		          type: "GET",
//		          url: "trace05.txt",
//		          success: function(data){
//				  	initPager(data.length / perLength + 1, currentPage);
//				  	var data = data.substr(perLength * currentPage, perLength);
//					$(".context").html(data);
//		          }
//		        });  
//			}
			  
			
			function initPager(pageCount, currentPage){
				$(".pager").html("");
				for (var i = 0; i < pageCount; i++) {
					if(i == currentPage){
						$(".pager").append('<div class="current">' + (i + 1) + '</div>');
					}
					else{
						$(".pager").append('<a href="javascript:showContext(' + i + ')"><div class="pageNum">' + (i + 1) + '</div></a>');
					}
				};
			}
			showContext(0);
			//initPager(10, 5);
		});
		function showContext(currentPage){
			$.ajax({
				type: "GET",
				url: "trace05.txt",
		        success: function(data){
				initPager(data.length / perLength + 1, currentPage);
				  var data = data.substr(perLength * currentPage, perLength);
					$(".context").html(data);
		          }
		        });  
			}
	</script>
</html>
